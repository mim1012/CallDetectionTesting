# 🚖 실제 카카오 택시 기사앱 테스트 가이드

## ⚡ 빠른 시작 (5분 내 테스트)

### 1. APK 설치
```bash
# 빌드된 APK 위치
app\build\outputs\apk\debug\app-debug.apk

# ADB로 설치
adb install app-debug.apk
```

### 2. 필수 권한 설정 (순서대로)

#### 1) 접근성 서비스 활성화
```
설정 → 접근성 → 설치된 서비스 → "카카오 택시 자동화" → ON
```

#### 2) 알림 접근 권한
```
설정 → 알림 → 고급 설정 → 알림 접근 → "카카오 택시 테스트" → ON
```

#### 3) 다른 앱 위에 표시
```
설정 → 애플리케이션 → 특별한 접근 → 다른 앱 위에 표시 → "카카오 택시 테스트" → 허용
```

### 3. 테스트 앱 실행 및 설정

```
1. 카카오 택시 테스트 앱 실행
2. "테스트 모드" 체크박스 OFF (실제 환경이므로)
3. "플로팅 컨트롤 표시" 클릭
4. 플로팅 버튼이 화면에 나타남
```

## 🏃 실시간 테스트 절차

### Step 1: 기본 감지 테스트
```
1. 카카오 택시 기사앱 실행
2. 로그인 후 "운행시작" 
3. 콜 대기 화면 진입
4. 테스트 앱으로 전환
5. "화면 캡처 시작" 클릭
6. 다시 카카오 택시 앱으로 전환
7. 로그 확인:
   ✅ "카카오 화면 확인됨"
   ✅ "콜 목록 화면 감지"
```

### Step 2: 자동 수락 테스트 (주의!)
```
⚠️ 실제 콜이 수락되므로 주의!

1. 플로팅 재생 버튼(▶) 클릭
2. 상태: "🚀 초고속 감지 실행중"
3. 콜 대기...
4. 콜이 오면 0.1초 내 자동 수락
5. 로그:
   ⚡ "Button detected in 87ms"
   ✅ "Ultra-fast click performed at (980, 1250)"
```

### Step 3: 필터 설정 (고액 콜만)
```
1. 테스트 앱에서 필터 설정:
   - 최소 금액: 50,000원
   - 최대 거리: 10km
2. 저액 콜은 무시하고 고액 콜만 자동 수락
```

## 📊 실시간 모니터링

### 디버그 상태 패널
```
📷 화면캡처: ✅ 캡처 성공 (87ms)
🔍 버튼감지: ✅ 버튼 1개 발견 (980, 1250)
👆 클릭시도: ✅ 스마트 클릭 성공!
📍 좌표: (980, 1250)
♿ 접근성: ✅ 카카오 택시 활성
```

### 성능 지표
```
- 감지 속도: 50-100ms
- 클릭 반응: 10-20ms
- 총 처리: 100-150ms
- 초당 프레임: 10-20 FPS
```

## 🔧 실시간 조정

### 플로팅 컨트롤
```
▶ : 자동 감지 시작
⏸ : 일시 정지
⚙ : 설정 열기
❌ : 완전 종료
```

### 긴급 정지
```
- 볼륨 다운 3번: 즉시 중지
- 플로팅 X 버튼: 종료
- 앱 전환: 자동 일시정지
```

## 🐛 실시간 문제 해결

### 1. "카카오 택시 대기중" 계속 표시
```
원인: 카카오 앱이 포그라운드가 아님
해결: 
1. 카카오 택시 앱을 최상단으로
2. 다른 앱 모두 종료
3. 화면 항상 켜짐 설정
```

### 2. 버튼 감지는 되는데 클릭 안됨
```
원인: 접근성 서비스 권한 부족
해결:
1. 접근성 서비스 재활성화
2. 앱 재시작
3. 기기 재부팅
```

### 3. 너무 느려서 놓침
```
원인: 기본 모드는 2초 간격
해결:
1. 초고속 모드 활성화
2. 다른 앱 모두 종료
3. 절전 모드 해제
```

## 📈 실전 최적화 팁

### 1. 황금 시간대 설정
```kotlin
// 피크 시간 자동 활성화
val peakHours = listOf(7..9, 18..20, 22..24)
if (currentHour in peakHours) {
    startFastDetection() // 초고속 모드
}
```

### 2. 지역별 필터
```kotlin
// GPS 기반 지역 필터
when (currentLocation) {
    "강남" -> minAmount = 30000
    "공항" -> minAmount = 50000
    else -> minAmount = 20000
}
```

### 3. 학습 모드
```kotlin
// 수락한 콜 패턴 학습
if (acceptedCalls > 100) {
    val pattern = analyzeCallPatterns()
    applySmartFilter(pattern)
}
```

## ⚠️ 주의사항

### 실전 사용 시
1. **실제 콜이 수락됨** - 취소 불가
2. **요금 미터기** - 자동 시작 안됨
3. **고객 전화** - 수동 응대 필요
4. **완료 처리** - 수동으로 해야 함

### 안전 운행
1. **주행 중 화면 주시 금지**
2. **정차 시에만 확인**
3. **자동 모드는 대기 중에만**

## 📱 실시간 로그 분석

### 로그 파일 위치
```
/Android/data/com.kakao.taxi.test/files/debug/logs/
- detection_YYYYMMDD.log
- click_YYYYMMDD.log
- error_YYYYMMDD.log
```

### 주요 로그 패턴
```
[SUCCESS] New call detected in 76ms
[SUCCESS] Yellow button found at (980, 1250)
[SUCCESS] Smart click performed
[INFO] Call accepted - Amount: 52,000원
```

### 실패 로그 분석
```
[ERROR] Button not found - reason: No yellow pixels
→ 해결: UI 변경 확인, 색상 범위 조정

[ERROR] Click failed - AccessibilityService not ready
→ 해결: 서비스 재시작, 권한 재설정
```

## 🚀 성능 극대화

### 1. 하드웨어 최적화
```
- CPU 거버너: Performance 모드
- GPU 렌더링: 강제 활성화
- 애니메이션: 모두 끄기
- 개발자 옵션: GPU 렌더링 프로파일
```

### 2. 소프트웨어 최적화
```
- 백그라운드 앱: 모두 종료
- 동기화: 일시 중지
- 위치 서비스: 높은 정확도
- 배터리 최적화: 제외
```

### 3. 네트워크 최적화
```
- 5G/LTE 우선
- WiFi 끄기 (불안정)
- VPN 끄기
- 데이터 세이버 끄기
```

## 💰 수익 극대화 전략

### 1. 시간대별 전략
```
06-09시: 최소 3만원 이상
09-18시: 최소 2만원 이상
18-22시: 최소 3만원 이상
22-02시: 최소 5만원 이상
```

### 2. 요일별 전략
```
월-목: 일반 필터
금요일: 고액 필터 (회식)
토요일: 장거리 우선
일요일: 공항 노선 집중
```

### 3. 날씨별 전략
```
맑음: 일반 모드
비/눈: 초고속 모드 + 할증
새벽: 모든 콜 수락
```

## 📞 문제 발생 시

### 즉시 조치
1. 플로팅 X 버튼으로 중지
2. 고객에게 정상 응대
3. 수동으로 미터기 시작
4. 로그 저장 후 분석

### 사후 분석
1. 디버그 폴더 확인
2. 스크린샷 분석
3. 타임스탬프 확인
4. 패턴 파악 후 개선